---
import Layout from "../layouts/Layout.astro";
import TourCard from "../components/TourCard";
import Hero from "../components/Hero";
import TransportFilter from "../components/TransportFilter";
import WhatsAppBtn from "../components/WhatsAppBtn.astro";
import { tours } from "../data/tours";
import { reviews } from "../data/reviews";
import ReviewCarousel from "../components/ReviewCarousel";
import { ArrowRight, Star } from "lucide-react";
import { Image } from "astro:assets";
import { getOptimizedImageUrl } from "../lib/utils";

// Get featured tours (first 3 or specific ones)
const featuredTours = tours.slice(0, 3);
---

<Layout
  title="La Fortuna Private Tours & Adventures | Beyond Arenal (Official)"
  description="Direct Operator. Book top-rated tours in La Fortuna: Safari Float, Rafting, Hiking, Canyoning. Best Price Guarantee. Boutique small groups."
  image="/images/og/home.webp"
>
  <!-- LCP discovery: Preload Hero Image -->
  <link
    rel="preload"
    as="image"
    href="https://imagedelivery.net/Lh5ivcu1Gl9SRBAdYRSP2g/54a5c2c2-3d08-4516-0804-2e722847be00/public"
    imagesrcset={`${getOptimizedImageUrl("https://imagedelivery.net/Lh5ivcu1Gl9SRBAdYRSP2g/54a5c2c2-3d08-4516-0804-2e722847be00/public", 800)} 800w, ${getOptimizedImageUrl("https://imagedelivery.net/Lh5ivcu1Gl9SRBAdYRSP2g/54a5c2c2-3d08-4516-0804-2e722847be00/public", 1200)} 1200w, https://imagedelivery.net/Lh5ivcu1Gl9SRBAdYRSP2g/54a5c2c2-3d08-4516-0804-2e722847be00/public 1920w`}
    imagesizes="100vw"
    fetchpriority="high"
    slot="head"
  />

  <!-- FAQPage Schema -->
  <script
    type="application/ld+json"
    slot="head"
    set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@type": "FAQPage",
      mainEntity: [
        {
          "@type": "Question",
          name: "What if it rains?",
          acceptedAnswer: {
            "@type": "Answer",
            text: "We embrace the rain! Tours typically run unless conditions are unsafe. Rainforest experiences are often best in the mist.",
          },
        },
        {
          "@type": "Question",
          name: "What should I bring?",
          acceptedAnswer: {
            "@type": "Answer",
            text: "Comfortable shoes, sunscreen, insect repellent, and a sense of adventure. Specific gear list provided upon booking.",
          },
        },
        {
          "@type": "Question",
          name: "Are tours private?",
          acceptedAnswer: {
            "@type": "Answer",
            text: "We specialize in boutique, small groups to ensure an authentic and personalized experience.",
          },
        },
      ],
    })}
  />
  <!-- Main Hero -->
  <Hero client:load />

  <!-- Strategic Trust Stats (Immediately after Hero) -->
  <div class="bg-white py-10 border-b border-slate-100 overflow-hidden">
    <div class="container-custom">
      <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-24">
        <div class="flex items-center gap-4 group scroll-reveal-stat">
          <span class="text-4xl transform group-hover:scale-110 transition-transform duration-500">‚≠ê</span>
          <div class="flex flex-col">
            <span class="text-3xl font-black text-slate-900 tracking-tighter flex items-baseline">
              <span class="stat-counter" data-target="4.8">0.0</span>
            </span>
            <span class="text-[10px] font-black uppercase tracking-[0.2em] text-slate-400">Average Rating</span>
          </div>
        </div>
        
        <div class="w-px h-12 bg-slate-100 hidden md:block opacity-50"></div>

        <div class="flex items-center gap-4 group scroll-reveal-stat" style="transition-delay: 0.1s">
          <span class="text-4xl transform group-hover:scale-110 transition-transform duration-500">üë§</span>
          <div class="flex flex-col">
            <span class="text-3xl font-black text-slate-900 tracking-tighter flex items-baseline">
              <span class="stat-counter" data-target="1200">0</span>
              <span class="text-[var(--color-primary)] ml-0.5">+</span>
            </span>
            <span class="text-[10px] font-black uppercase tracking-[0.2em] text-slate-400">Happy Travelers</span>
          </div>
        </div>

        <div class="w-px h-12 bg-slate-100 hidden md:block opacity-50"></div>

        <div class="flex items-center gap-8 opacity-20 grayscale hover:opacity-100 transition-all duration-700 scroll-reveal-stat" style="transition-delay: 0.2s">
           <span class="font-black text-sm tracking-tighter hover:text-slate-900 cursor-default">TRIPADVISOR</span>
           <span class="font-black text-sm tracking-tighter hover:text-slate-900 cursor-default">GOOGLE</span>
           <span class="font-black text-sm tracking-tighter hover:text-slate-900 cursor-default">VIATOR</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Stats Counter Animation
    const statsObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const counter = entry.target as HTMLElement;
          const target = parseFloat(counter.getAttribute('data-target') || '0');
          const duration = 2000; // 2 seconds
          const startTime = performance.now();
          const startValue = 0;
          const isDecimal = counter.getAttribute('data-target')?.includes('.');

          const updateCounter = (currentTime: number) => {
            const elapsedTime = currentTime - startTime;
            if (elapsedTime < duration) {
              const progress = elapsedTime / duration;
              // Ease out quad
              const easeProgress = 1 - (1 - progress) * (1 - progress);
              const currentValue = startValue + (target - startValue) * easeProgress;
              
              counter.textContent = isDecimal 
                ? currentValue.toFixed(1) 
                : Math.floor(currentValue).toLocaleString();
              
              requestAnimationFrame(updateCounter);
            } else {
              counter.textContent = isDecimal 
                ? target.toFixed(1) 
                : target.toLocaleString();
            }
          };

          requestAnimationFrame(updateCounter);
          statsObserver.unobserve(counter);
        }
      });
    }, { threshold: 0.5 });

    document.querySelectorAll('.stat-counter').forEach(stat => statsObserver.observe(stat));
    
    // Stat section entrance animation logic
    const statRevealObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
          statRevealObserver.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.scroll-reveal-stat').forEach(el => statRevealObserver.observe(el));
  </script>

  <style>
    .scroll-reveal-stat {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .scroll-reveal-stat.is-visible {
      opacity: 1;
      transform: translateY(0);
    }
  </style>

  <!-- Top Picks Strategy - MOST BOOKED -->
  <section class="py-32 bg-slate-50 relative overflow-hidden scroll-reveal">
    <div class="container-custom relative z-10">
      <div class="text-center mb-20 scroll-child">
        <span class="text-[var(--color-primary)] font-black uppercase tracking-[0.4em] text-[10px] mb-4 block">Proven Experiences</span>
        <h2 class="text-5xl md:text-7xl font-bold text-slate-900 tracking-tighter mb-6">
          MOST <span class="text-slate-400">BOOKED.</span>
        </h2>
        <p class="text-slate-500 max-w-2xl mx-auto font-medium leading-relaxed">
          The best-sellers. These are the top-rated adventures that travelers choose time and time again for the perfect Arenal experience.
        </p>
      </div>
      <!-- ... (Grid content remains same, just section header changed for growth) ... -->

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 scroll-child">
        {[
          {
            tag: "Selling Fast - Limited",
            title: "Exclusive: Horseback Riding Tour in Chachagua",
            desc: '"Our #1 recommended experience. A scenic ride ending at a beautiful river."',
            price: "65",
            id: "horseback-001",
            icon: "üêé"
          },
          {
            tag: "Most Popular",
            title: "Mini Combo #1 ‚Äì Volcano Hike + Waterfall + Lunch",
            desc: '"The absolute best-seller. See all the highlights in one flawless day."',
            price: "152",
            id: "combo-001",
            icon: "üî•"
          },
          {
            tag: "Best for Families",
            title: "Safari Float: Sloths, Monkeys & River Drift",
            desc: '"Safe, relaxing, and packed with wildlife sightings. Perfect for all ages."',
            price: "83",
            id: "river-001",
            icon: "üë®‚Äçüë©‚Äçüëß"
          }
        ].map(pick => (
          <a
            href={`/tours/${tours.find(t => t.id === pick.id)?.slug}`}
            class={`group relative rounded-[3rem] p-10 shadow-xl hover:shadow-2xl transition-all duration-700 hover:-translate-y-4 overflow-hidden ${
              pick.id === 'horseback-001' 
                ? 'bg-gradient-to-br from-emerald-50 to-emerald-100/50 border-2 border-emerald-500 shadow-[0_20px_40px_-15px_rgba(16,185,129,0.3)] ring-4 ring-emerald-500/20 scale-[1.02]' 
                : 'bg-white border border-slate-100/50'
            }`}
          >
             <!-- Decorative background text -->
             <div class="absolute -top-10 -right-10 text-9xl opacity-[0.03] font-black group-hover:opacity-[0.06] transition-opacity pointer-events-none uppercase italic leading-none">{pick.tag.split(' ')[0]}</div>
             
             <div class="relative z-10 space-y-8">
                <div class="flex items-center gap-3">
                  <span class="w-10 h-10 rounded-2xl bg-slate-50 flex items-center justify-center text-xl shadow-inner">{pick.icon}</span>
                  <span class="text-[10px] font-black uppercase tracking-widest text-slate-400 group-hover:text-[var(--color-primary)] transition-colors">{pick.tag}</span>
                </div>
                
                <h3 class="text-2xl font-bold text-slate-900 leading-tight group-hover:text-[var(--color-primary)] transition-colors">
                  {pick.title}
                </h3>
                
                <p class="text-slate-400 text-sm italic font-medium leading-relaxed">
                  {pick.desc}
                </p>
                
                <div class="pt-8 border-t border-slate-50 flex items-center justify-between">
                  <div class="flex items-baseline gap-1">
                    <span class="text-xs font-bold text-slate-300 uppercase">$</span>
                    <span class="text-3xl font-black text-slate-900 leading-none">{pick.price}</span>
                  </div>
                  <div class="w-12 h-12 rounded-2xl bg-slate-900 text-white flex items-center justify-center group-hover:bg-[var(--color-primary)] transition-all duration-500 shadow-lg shadow-slate-200">
                    <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
                  </div>
                </div>
             </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- Featured Expeditions -->
  <section
    id="tours"
    class="py-32 bg-white relative overflow-hidden scroll-reveal"
  >
    <!-- Decorative background elements -->
    <div
      class="absolute top-0 right-0 w-1/3 h-full bg-slate-50 opacity-50 -skew-x-12 transform translate-x-1/2"
    >
    </div>

    <div class="container-custom relative z-10">
      <div
        class="flex flex-col md:flex-row md:items-end justify-between mb-20 gap-8 scroll-child"
      >
        <div class="max-w-2xl">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-12 h-1 bg-[var(--color-primary)]"></div>
            <span
              class="text-[var(--color-primary)] font-black uppercase tracking-[0.3em] text-xs"
              >Complete Catalog</span
            >
          </div>
          <h2
            class="text-4xl sm:text-5xl md:text-7xl font-bold text-slate-900 tracking-tighter leading-none"
          >
            DISCOVER <br /><span class="text-slate-400">MORE.</span>
          </h2>
        </div>
        <p
          class="text-slate-500 max-w-sm text-base md:text-lg font-medium leading-relaxed"
        >
          Explore our full range of curated local experiences designed for deep
          connection with nature.
        </p>
      </div>

      <div
        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 scroll-child"
        style="--scroll-delay: 0.15s"
      >
        {featuredTours.map((tour) => <TourCard tour={tour} client:visible />)}
      </div>

      <div class="mt-20 flex justify-center">
        <a
          href="/tours"
          class="group relative inline-flex items-center gap-4 px-12 py-5 bg-slate-900 text-white rounded-2xl font-black uppercase tracking-widest text-sm transition-all hover:bg-[var(--color-primary)] hover:shadow-2xl hover:shadow-emerald-500/20 active:scale-95"
        >
          Explore All Adventures
          <div
            class="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center group-hover:bg-white group-hover:text-slate-900 transition-colors"
          >
            <svg
              class="w-4 h-4 transform group-hover:translate-x-1 transition-transform"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="3"
                d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </div>
        </a>
      </div>
    </div>
  </section>

  <!-- Premium Planning Section -->
  

  <!-- Transport Section (Strategic Placement) -->
  <section class="py-24 bg-slate-900 text-white overflow-hidden scroll-reveal">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto text-center mb-16 scroll-child">
        <span
          class="text-[var(--color-secondary)] font-black uppercase tracking-[0.3em] text-xs mb-6 block"
          >Door-to-Door Comfort</span
        >
        <h2
          class="text-5xl md:text-7xl font-bold tracking-tighter mb-8 text-white"
        >
          PRIVATE <span class="text-slate-400">SHUTTLES.</span>
        </h2>
        <p
          class="text-slate-300 text-xl md:text-2xl font-light leading-relaxed max-w-3xl mx-auto"
        >
          Experience seamless travel across Costa Rica. Professional drivers and
          premium vehicles for your ultimate comfort.
        </p>
      </div>
      <div class="max-w-5xl mx-auto scroll-child" style="--scroll-delay: 0.2s">
        <TransportFilter client:visible />
      </div>
    </div>
  </section>

  <!-- Social Proof Section -->
  <section class="py-32 bg-white border-y border-slate-100 scroll-reveal">
    <div class="container-custom">
      <div class="flex flex-col items-center text-center mb-20 scroll-child">
        <div class="flex gap-1 mb-6 text-yellow-400">
          {
            [...Array(5)].map(() => (
              <svg class="w-6 h-6 fill-current" viewBox="0 0 24 24">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
              </svg>
            ))
          }
        </div>
        <h2
          class="text-4xl md:text-6xl font-bold text-slate-900 tracking-tighter mb-6 uppercase"
          aria-label="Trusted by Global Explorers"
        >
          Trusted by <br /><span class="text-slate-400">Global Explorers.</span>
        </h2>
        <div
          class="flex flex-wrap justify-center gap-12 opacity-30 grayscale items-center mt-10 mb-20"
        >
          {/* TripAdvisor Logo */}
          <div class="h-10 w-auto flex items-center">
            <svg
              class="h-full w-auto"
              viewBox="0 -96 512.2 512.2"
              xmlns="http://www.w3.org/2000/svg"
              ><style>
                .st0 {
                  fill: currentColor;
                }
              </style><path
                class="st0"
                d="M128.2 127.9C92.7 127.9 64 156.6 64 192c0 35.4 28.7 64.1 64.1 64.1 35.4 0 64.1-28.7 64.1-64.1.1-35.4-28.6-64.1-64-64.1zm0 110c-25.3 0-45.9-20.5-45.9-45.9s20.5-45.9 45.9-45.9S174 166.7 174 192s-20.5 45.9-45.8 45.9z"
              ></path><circle class="st0" cx="128.4" cy="191.9" r="31.9"
              ></circle><path
                class="st0"
                d="M384.2 127.9c-35.4 0-64.1 28.7-64.1 64.1 0 35.4 28.7 64.1 64.1 64.1 35.4 0 64.1-28.7 64.1-64.1 0-35.4-28.7-64.1-64.1-64.1zm0 110c-25.3 0-45.9-20.5-45.9-45.9s20.5-45.9 45.9-45.9S430 166.7 430 192s-20.5 45.9-45.8 45.9z"
              ></path><circle class="st0" cx="384.4" cy="191.9" r="31.9"
              ></circle><path
                class="st0"
                d="M474.4 101.2l37.7-37.4h-76.4C392.9 29 321.8 0 255.9 0c-66 0-136.5 29-179.3 63.8H0l37.7 37.4C14.4 124.4 0 156.5 0 192c0 70.8 57.4 128.2 128.2 128.2 32.5 0 62.2-12.1 84.8-32.1l43.4 31.9 42.9-31.2-.5-1.2c22.7 20.2 52.5 32.5 85.3 32.5 70.8 0 128.2-57.4 128.2-128.2-.1-35.4-14.6-67.5-37.9-90.7zM368 64.8c-60.7 7.6-108.3 57.6-111.9 119.5-3.7-62-51.4-112.1-112.3-119.5 30.6-22 69.6-32.8 112.1-32.8S337.4 42.8 368 64.8zM128.2 288.2C75 288.2 32 245.1 32 192s43.1-96.2 96.2-96.2 96.2 43.1 96.2 96.2c-.1 53.1-43.1 96.2-96.2 96.2zm256 0c-53.1 0-96.2-43.1-96.2-96.2s43.1-96.2 96.2-96.2 96.2 43.1 96.2 96.2c-.1 53.1-43.1 96.2-96.2 96.2z"
              ></path></svg
            >
            <span class="ml-2 font-black text-2xl tracking-tighter"
              >TRIPADVISOR</span
            >
          </div>
          <span
            class="font-black text-2xl tracking-tighter"
            aria-label="Google Reviews">GOOGLE REVIEWS</span
          >
          <span
            class="font-black text-2xl tracking-tighter"
            aria-label="Viator Reviews">VIATOR</span
          >
        </div>

        <ReviewCarousel client:visible reviews={reviews} />
      </div>
    </div>
  </section>
  <section class="py-32 bg-slate-950 relative overflow-hidden scroll-reveal">
    <!-- Grid Pattern Overlay -->
    <div class="absolute inset-0 opacity-[0.03] pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"></div>
    
    <div class="container-custom relative z-10">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-24 items-center">
        <div class="space-y-12 scroll-child">
          <div class="space-y-4">
            <span class="text-white/40 font-black uppercase tracking-[0.4em] text-[10px] block">Traveler Essentials</span>
            <h2 class="text-6xl md:text-8xl font-bold text-white leading-[0.85] tracking-tighter">
              PLANNING <br/> 
              <span class="text-[var(--color-secondary)] drop-shadow-[0_0_30px_rgba(var(--color-secondary-rgb),0.3)]">COSTA RICA?</span>
            </h2>
            <p class="text-white/50 text-xl font-light leading-relaxed max-w-lg pt-4">
              Everything you need to know for a seamless arrival and an unforgettable stay in La Fortuna.
            </p>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-12 pt-8">
            {[
              { label: "Currency", value: "USD is widely accepted everywhere.", icon: "üíµ" },
              { label: "Transport", value: "Private shuttles are the safest way to travel.", icon: "üöê" },
              { label: "Best Time", value: "Arenal is beautiful year-round.", icon: "‚òÄÔ∏è" },
              { label: "Booking", value: "Book in advance to secure small group spots.", icon: "üóìÔ∏è" }
            ].map(item => (
              <div class="space-y-3 group border-l border-white/10 pl-6 hover:border-[var(--color-secondary)] transition-colors duration-500">
                <span class="text-2xl block group-hover:scale-110 transition-transform origin-left">{item.icon}</span>
                <h3 class="text-[10px] font-black uppercase tracking-[0.2em] text-[var(--color-secondary)]">{item.label}</h3>
                <p class="text-white/70 text-sm font-medium leading-relaxed">{item.value}</p>
              </div>
            ))}
          </div>
        </div>

        <div class="scroll-child">
            <div class="relative p-1 bg-gradient-to-br from-white/10 to-transparent rounded-[4rem]">
              <div class="bg-slate-900 rounded-[3.8rem] p-16 space-y-10 shadow-3xl relative overflow-hidden border border-white/5">
                <!-- Inner Glow -->
                <div class="absolute -top-24 -right-24 w-80 h-80 bg-[var(--color-secondary)] opacity-10 blur-[100px] rounded-full"></div>
                
                <div class="space-y-4 relative z-10">
                  <span class="text-[var(--color-secondary)] text-[10px] font-black uppercase tracking-[0.4em]">Direct Expert Support</span>
                  <h3 class="text-4xl font-bold text-white leading-tight">Skip the middleman. Chat with us.</h3>
                  <p class="text-white/40 text-sm font-medium leading-relaxed">
                    Don't waste time on generic booking sites. Get direct answers from local operators who live and breathe Arenal.
                  </p>
                </div>
                
                <WhatsAppBtn
                  text="Chat with a Local Expert"
                  message="Hola Beyond Arenal! I'm planning a trip to Costa Rica and would love some local advice."
                  trackLocation="home_planning_expert"
                  className="w-full justify-center bg-white text-slate-950 py-8 rounded-[2rem] text-lg font-black uppercase tracking-widest shadow-2xl hover:bg-[var(--color-secondary)] hover:text-slate-900 transition-all duration-500 transform hover:-translate-y-2"
                />
                
                <div class="flex items-center justify-between text-[10px] text-white/20 font-black uppercase tracking-[0.2em] pt-8 border-t border-white/5">
                  <span>Native English & Spanish</span>
                  <span class="text-[var(--color-secondary)]">Instant Reply</span>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Editorial About Section (Asymmetric) -->
  <section class="py-40 bg-slate-50 relative scroll-reveal">
    <div class="container-custom">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-20 items-center">
        <div class="lg:col-span-7 relative group scroll-child">
          <div
            class="absolute -inset-4 bg-white rounded-[3rem] shadow-sm transform -rotate-1 group-hover:rotate-0 transition-transform duration-700"
          >
          </div>
          <div
            class="relative aspect-[16/10] rounded-[2.5rem] overflow-hidden shadow-2xl"
          >
            <img
              src="https://imagedelivery.net/Lh5ivcu1Gl9SRBAdYRSP2g/bef4db75-13f0-4965-ee32-83ea89ea8c00/public"
              alt="Local Guide on the river"
              loading="lazy"
              decoding="async"
              class="w-full h-full object-cover transition-transform duration-[2s] group-hover:scale-105"
            />
            <!-- Visual texture overlay -->
            <div
              class="absolute inset-0 bg-gradient-to-tr from-slate-900/40 to-transparent mix-blend-overlay"
            >
            </div>
          </div>
          <!-- Floating Editorial Badge -->
          <div
            class="absolute -bottom-10 -right-10 bg-[var(--color-primary)] text-white p-10 rounded-[2.5rem] shadow-2xl hidden md:block max-w-xs rotate-3 hover:rotate-0 transition-transform duration-500"
          >
            <span
              class="text-[var(--color-secondary)] font-black text-5xl mb-2 block tracking-tighter"
              >100%</span
            >
            <p
              class="font-bold uppercase tracking-widest text-xs leading-tight"
            >
              Local ownership and authentic guidance since day one.
            </p>
          </div>
        </div>

        <div
          class="lg:col-span-5 space-y-12 scroll-child"
          style="--scroll-delay: 0.2s"
        >
          <div class="space-y-6">
            <span
              class="inline-block px-4 py-1.5 rounded-full bg-slate-100 text-slate-800 text-[10px] font-black uppercase tracking-widest"
            >
              The Essence of Beyond Arenal
            </span>
            <h2
              class="text-5xl md:text-6xl font-bold text-slate-900 tracking-tighter leading-none"
            >
              BORN IN <br /><span
                class="italic underline decoration-[var(--color-secondary)] decoration-8 underline-offset-12"
                >LA FORTUNA.</span
              >
            </h2>
            <p class="text-slate-500 text-xl leading-relaxed font-light">
              We don't just guide tours; we share our home. Born and raised in
              the Pe√±as Blancas valley, our passion flows through the same
              rivers we'll explore together.
            </p>
          </div>

          <div class="space-y-4">
            {
              [
                {
                  title: "Artisanal Guidance",
                  desc: "Native bilingual guides with deep knowledge.",
                },
                {
                  title: "Boutique Groups",
                  desc: "Privacy and focus on your safety & comfort.",
                },
                {
                  title: "Eco-Conscious",
                  desc: "100% committed to river conservation.",
                },
              ].map((item) => (
                <div class="flex items-start gap-4 p-6 rounded-3xl bg-white border border-slate-100 hover:border-[var(--color-secondary)] transition-all group">
                  <div class="w-10 h-10 rounded-2xl bg-slate-50 flex items-center justify-center group-hover:bg-[var(--color-secondary)] transition-colors">
                    <span class="text-lg">üåø</span>
                  </div>
                  <div>
                    <h3 class="font-bold text-slate-900 uppercase tracking-widest text-xs mb-1">
                      {item.title}
                    </h3>
                    <p class="text-slate-500 text-sm">{item.desc}</p>
                  </div>
                </div>
              ))
            }
          </div>

          <div class="pt-6">
            <a
              href="/about"
              class="inline-flex items-center gap-4 text-slate-900 font-black uppercase tracking-widest text-xs border-b-2 border-slate-900 pb-2 hover:text-[var(--color-primary)] hover:border-[var(--color-primary)] transition-all"
            >
              Discover Our Story
              <ArrowRight class="w-4 h-4" />
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="py-32 bg-white relative overflow-hidden scroll-reveal">
    <div class="container-custom">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-24">
        <div class="scroll-child">
          <span
            class="text-[var(--color-primary)] font-black uppercase tracking-widest text-xs mb-4 block"
            >Common Inquiries</span
          >
          <h2
            class="text-5xl md:text-7xl font-bold text-slate-900 tracking-tighter leading-none mb-10 uppercase"
          >
            FAQ<span class="text-slate-400">S.</span>
          </h2>
          <p class="text-slate-500 text-lg leading-relaxed font-light max-w-sm">
            Everything you need to know before your Costa Rican expedition.
          </p>
        </div>
        <div class="space-y-8 scroll-child" style="--scroll-delay: 0.15s">
          {
            [
              {
                q: "What if it rains?",
                a: "We embrace the rain! Tours typically run unless conditions are unsafe. Rainforest experiences are often best in the mist.",
              },
              {
                q: "What should I bring?",
                a: "Comfortable shoes, sunscreen, insect repellent, and a sense of adventure. Specific gear list provided upon booking.",
              },
              {
                q: "Are tours private?",
                a: "We specialize in boutique, small groups to ensure an authentic and personalized experience.",
              },
            ].map((faq) => (
              <div class="space-y-2 pb-8 border-b border-slate-100">
                <h3 class="font-bold text-slate-900 text-lg uppercase tracking-tight">
                  {faq.q}
                </h3>
                <p class="text-slate-500 leading-relaxed">{faq.a}</p>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </section>

  <!-- Spa Teaser (Luxury Editorial) -->
  <section class="py-40 bg-slate-50 relative overflow-hidden scroll-reveal">
    <div class="container-custom">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-24 items-center">
        <div class="space-y-10 order-2 lg:order-1 scroll-child">
          <div class="flex items-center gap-4 mb-4">
            <div class="w-12 h-px bg-emerald-600"></div>
            <span
              class="text-emerald-600 font-black uppercase tracking-[0.4em] text-[10px]"
              >Artisanal Wellness Spa</span
            >
          </div>
          <h2
            class="text-6xl md:text-8xl font-serif text-slate-900 leading-none italic"
          >
            Sanctuary <br /><span class="not-italic font-bold text-emerald-900"
              >of Rejuvenation</span
            >
          </h2>
          <p
            class="text-slate-500 text-xl leading-relaxed font-light italic max-w-lg"
          >
            Elevate your journey with our artisanal wellness treatments. From
            volcanic mud wraps to relaxing massages in the heart of the
            rainforest.
          </p>
          <div class="pt-6">
            <a
              href="/spa"
              class="group relative inline-flex items-center gap-6 px-12 py-6 bg-emerald-900 text-white rounded-2xl font-black uppercase tracking-widest text-xs transition-all hover:bg-emerald-600 hover:shadow-2xl hover:shadow-emerald-500/20 shadow-xl"
            >
              Explore the Catalog
              <div
                class="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center group-hover:bg-white group-hover:text-emerald-900 transition-colors"
              >
                <ArrowRight class="w-4 h-4" />
              </div>
            </a>
          </div>
        </div>

        <div
          class="relative order-1 lg:order-2 group scroll-child"
          style="--scroll-delay: 0.15s"
        >
          <div
            class="absolute -inset-6 bg-emerald-50 rounded-[4rem] transform rotate-2 group-hover:rotate-0 transition-transform duration-700"
          >
          </div>
          <div
            class="relative aspect-[4/5] rounded-[3.5rem] overflow-hidden shadow-2xl"
          >
            <img
              src="https://images.unsplash.com/photo-1544161515-4ab6ce6db874?q=80&w=2621"
              alt="Spa Experience"
              loading="lazy"
              decoding="async"
              class="w-full h-full object-cover transition-transform duration-[2s] group-hover:scale-105"
            />
            <div
              class="absolute inset-0 bg-gradient-to-t from-emerald-900/40 to-transparent"
            >
            </div>
          </div>
          <!-- Floating Detail -->
          <div
            class="absolute top-10 -left-10 bg-white p-8 rounded-[2.5rem] shadow-2xl hidden md:block max-w-[200px] -rotate-3 hover:rotate-0 transition-transform duration-500 border border-emerald-50"
          >
            <span class="text-emerald-600 font-serif text-4xl mb-2 block italic"
              >Pure</span
            >
            <p
              class="font-bold uppercase tracking-widest text-[10px] text-slate-400 leading-tight"
            >
              Artisanal treatments with local volcanic extracts.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA Section (Immersive Overlay) -->
  <section class="py-40 bg-slate-900 relative overflow-hidden scroll-reveal">
    <!-- Abstract Shapes -->
    <div class="absolute top-0 right-0 w-full h-full opacity-20">
      <div
        class="absolute top-[-20%] right-[-10%] w-[600px] h-[600px] rounded-full bg-[var(--color-primary)] blur-[150px]"
      >
      </div>
      <div
        class="absolute bottom-[-10%] left-[-5%] w-[400px] h-[400px] rounded-full bg-emerald-500/20 blur-[100px]"
      >
      </div>
    </div>

    <div class="container-custom relative z-10">
      <div class="max-w-5xl mx-auto text-center space-y-12 scroll-child">
        <div class="space-y-6">
          <span
            class="text-[var(--color-secondary)] font-black uppercase tracking-[0.4em] text-xs"
            >Begin your expedition</span
          >
          <h2
            class="text-6xl md:text-9xl font-bold text-white tracking-tighter leading-none uppercase"
          >
            Start <br /><span class="text-[var(--color-secondary)]"
              >Living.</span
            >
          </h2>
          <p
            class="text-white/60 text-xl font-light max-w-2xl mx-auto leading-relaxed"
          >
            Your journey through the extraordinary starts with a simple
            conversation. Join us in the heart of Costa Rica.
          </p>
        </div>

        <div
          class="flex flex-col items-center gap-8 scroll-child"
          style="--scroll-delay: 0.2s"
        >
          <WhatsAppBtn
            text="Contact Our Experts"
            message="Hola Beyond Arenal! I'm ready to book an adventure in La Fortuna. Can you help me with the next steps?"
            className="h-20 px-12 bg-white text-slate-900 hover:bg-[var(--color-secondary)] rounded-[2rem] font-black uppercase tracking-widest transition-all duration-500 flex items-center gap-4 shadow-2xl hover:scale-105"
            trackLocation="home_bottom_cta"
          />
          <div
            class="flex items-center gap-3 text-white/30 text-[10px] font-black uppercase tracking-[0.2em]"
          >
            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
            Online Assistance via WhatsApp
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* ‚îÄ‚îÄ Scroll-Driven Reveal System ‚îÄ‚îÄ */

  /* Base state: invisible, shifted down */
  .scroll-child {
    opacity: 0;
    transform: translateY(40px);
    transition:
      opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1),
      transform 0.8s cubic-bezier(0.16, 1, 0.3, 1);
    transition-delay: var(--scroll-delay, 0s);
  }

  /* Revealed state */
  .scroll-reveal.is-visible .scroll-child {
    opacity: 1;
    transform: translateY(0);
  }

  /* Parallax float for decorative elements */
  @keyframes parallax-float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-15px);
    }
  }

  .scroll-reveal.is-visible .parallax-float {
    animation: parallax-float 6s ease-in-out infinite;
  }

  /* Reduced motion: instant reveal, no animations */
  @media (prefers-reduced-motion: reduce) {
    .scroll-child {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
</style>

<script>
  // IntersectionObserver for scroll-reveal sections
  const revealSections = document.querySelectorAll(".scroll-reveal");

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
        }
      });
    },
    {
      threshold: 0.08,
      rootMargin: "0px 0px -60px 0px",
    },
  );

  revealSections.forEach((section) => observer.observe(section));
</script>
